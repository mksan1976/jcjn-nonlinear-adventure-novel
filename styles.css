/* 舊的 sidebar 區塊 (第 138 行開始)
.sidebar {
    height: 100%;
    width: 0; 
    position: fixed;
    z-index: 999;
    top: 0;
    left: 0;
    background-color: var(--color-nav-bg);
    overflow-x: hidden;
    padding-top: 60px;
    transition: 0.5s;
} 
*/

/* ------------------------------------- */
/* 【修正後的 Sidebar】 (Side Drawer Menu) */
/* ------------------------------------- */

.sidebar {
    height: 100%;
    /* 關鍵 1: 設置固定寬度 */
    width: 250px; 
    position: fixed;
    z-index: 999;
    top: 0;
    left: 0;
    background-color: var(--color-nav-bg);
    overflow-x: hidden;
    padding-top: 60px;
    transition: transform 0.3s ease-in-out; 
    
    /* 關鍵 2: 預設使用 transform 將選單推到螢幕左側外面 */
    transform: translateX(-100%); 
}

/* 關鍵 3: 當 body 帶有 sidebar-open 類別時，選單滑入 */
body.sidebar-open .sidebar {
    transform: translateX(0);
}

/* ------------------------------------- */
/* 【新增的背景遮罩】 (Overlay) */
/* ------------------------------------- */

.sidebar-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7); /* 半透明黑色 */
    z-index: 998; /* 比選單低一層 */
    
    /* 關鍵 4: 預設完全隱藏遮罩，且不佔用空間和事件 */
    display: none; 
    opacity: 0;
    transition: opacity 0.3s ease-in-out; 
}

/* 關鍵 5: 當 body 帶有 sidebar-open 類別時，遮罩顯示 */
body.sidebar-open .sidebar-overlay {
    display: block; /* 讓遮罩佔位 */
    opacity: 1; /* 顯示遮罩 */
}

/* 確保點擊連結後能關閉的樣式 (如果您的 JS 是使用 width: 0 的舊邏輯，這會更可靠) */
.sidebar a {
    /* ... 保持原樣式 ... */
}
